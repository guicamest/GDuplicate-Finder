plugins {
    id("org.danilopianini.gradle-pre-commit-git-hooks") version "1.1.11"
}

include 'core', 'custom-ktlint-rules'

gitHooks { extension ->
    extension.with {
        commitMsg { context ->
            context.with {
                conventionalCommits { conventionalCommits ->
                    conventionalCommits.with {
                        defaultTypes()
                    }
                }
            }
        }
        preCommit { context ->
            context.with {
                from(settingsDir.toPath().resolve(".hooks").resolve("pre-commit-ktlint-format").toFile())
                tasks("clean", ["build"] as String[], false)
            }
        }
        createHooks(true)
    }
}